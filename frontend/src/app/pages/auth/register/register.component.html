<div class="register-container">
  <h2>{{ isEditMode ? 'Editar Datos del Paciente' : 'Registrarse como Paciente' }}</h2>
  <form (submit)="register(); $event.preventDefault()">
    <div class="form-row">
      <div class="form-group">
        <label>Nombre *</label>
        <input 
          type="text" 
          [(ngModel)]="name" 
          name="name" 
          required
          placeholder="Ingrese su nombre"
          [disabled]="isLoading">
      </div>

      <div class="form-group">
        <label>Apellido Paterno *</label>
        <input 
          type="text" 
          [(ngModel)]="paternalLastName" 
          name="paternalLastName" 
          required
          placeholder="Apellido paterno"
          [disabled]="isLoading">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Apellido Materno</label>
        <input 
          type="text" 
          [(ngModel)]="maternalLastName" 
          name="maternalLastName"
          placeholder="Apellido materno"
          [disabled]="isLoading">
      </div>

      <div class="form-group">
        <label>Email *</label>
        <input 
          type="email" 
          [(ngModel)]="email" 
          name="email" 
          required
          placeholder="correo@ejemplo.com"
          [disabled]="isLoading">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Contrase√±a *</label>
        <input 
          type="password" 
          [(ngModel)]="password" 
          name="password" 
          required
          placeholder="M√≠nimo 6 caracteres"
          [disabled]="isLoading">
      </div>

      <div class="form-group">
        <label>RUT * 
          <span *ngIf="rutChecked && !isEditMode" class="rut-verified">‚úì Verificado</span>
          <span *ngIf="isEditMode" class="rut-edit-mode">üìù Modo Edici√≥n</span>
        </label>
        <input 
          type="text" 
          [(ngModel)]="rut" 
          name="rut" 
          required
          placeholder="12.345.678-9"
          [disabled]="isLoading || isEditMode"
          (blur)="onRutBlur()"
          [class.rut-verified-input]="rutChecked"
          [class.rut-edit-mode-input]="isEditMode">
        <small *ngIf="!rutChecked && !isEditMode" class="rut-help">
          El RUT ser√° verificado autom√°ticamente
        </small>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Fecha de Nacimiento *</label>
        <input 
          type="date" 
          [(ngModel)]="birthDate" 
          name="birthDate" 
          required
          [disabled]="isLoading">
      </div>

      <div class="form-group">
        <label>Tel√©fono *</label>
        <input 
          type="text" 
          [(ngModel)]="phone" 
          name="phone" 
          required
          placeholder="+56 9 1234 5678"
          [disabled]="isLoading">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Direcci√≥n *</label>
        <input 
          type="text" 
          [(ngModel)]="address" 
          name="address" 
          required
          placeholder="Calle, n√∫mero, ciudad"
          [disabled]="isLoading">
      </div>

      <div class="form-group">
        <label>G√©nero *</label>
        <select 
          [(ngModel)]="gender" 
          name="gender" 
          required
          [disabled]="isLoading">
          <option [value]="null" disabled>Selecciona tu g√©nero</option>
          <option [value]="Gender.Male">Masculino</option>
          <option [value]="Gender.Female">Femenino</option>
        </select>
      </div>
    </div>

    <div class="form-actions">
      <button 
        type="submit" 
        class="submit-btn"
        [disabled]="isLoading">
        <span *ngIf="!isLoading && !isEditMode">Registrar</span>
        <span *ngIf="!isLoading && isEditMode">Actualizar Datos</span>
        <span *ngIf="isLoading && !isEditMode">Registrando...</span>
        <span *ngIf="isLoading && isEditMode">Actualizando...</span>
      </button>
      <button 
        type="button" 
        class="back-btn"
        (click)="backToHome()"
        [disabled]="isLoading">
        Volver
      </button>
    </div>
  </form>
</div>