<div class="manage-physician-container">
    <!-- Header -->
    <div class="header">
      <h1>Gestión de Personal Médico</h1>
      <div class="header-actions">
        <button (click)="addNewPhysician()" class="btn-primary">
          <i class="icon">👨‍⚕️➕</i>
          Nuevo Médico
        </button>
        <button (click)="exportPhysicians()" class="btn-secondary">
          <i class="icon">📊</i>
          Exportar
        </button>
        <button (click)="backToDashboard()" class="btn-back">
          <i class="icon">🏠</i>
          Dashboard
        </button>
      </div>
    </div>
  
    <!-- Filtros -->
    <div class="filters-section">
      <h3>Filtros de Búsqueda</h3>
      <div class="filters-grid">
        <div class="filter-group">
          <label>Buscar por Nombre:</label>
          <input 
            type="text" 
            [(ngModel)]="searchName" 
            (input)="applyFilters()"
            placeholder="Nombre, apellido paterno o materno"
            class="filter-input">
        </div>
        
        <div class="filter-group">
          <label>Buscar por Email:</label>
          <input 
            type="email" 
            [(ngModel)]="searchEmail" 
            (input)="applyFilters()"
            placeholder="medico@ejemplo.com"
            class="filter-input">
        </div>
        
        <div class="filter-group">
          <label>Filtrar por Especialidad:</label>
          <select 
            [(ngModel)]="searchSpecialty" 
            (change)="applyFilters()"
            class="filter-input">
            <option value="">Todas las especialidades</option>
            <option *ngFor="let specialty of specialties" [value]="specialty">
              {{ specialty }}
            </option>
          </select>
        </div>
        
        <div class="filter-group">
          <button (click)="clearFilters()" class="btn-clear">
            <i class="icon">🗑️</i>
            Limpiar Filtros
          </button>
        </div>
      </div>
    </div>
  
    <!-- Resultados -->
    <div class="results-section">
      <div class="results-header">
        <h3>
          Médicos Encontrados: {{ filteredPhysicians.length }}
          <span *ngIf="filteredPhysicians.length !== physicians.length">
            (de {{ physicians.length }} totales)
          </span>
        </h3>
        <div class="results-info">
          Página {{ currentPage }} de {{ totalPages }}
        </div>
      </div>
  
      <!-- Tabla de Médicos -->
      <div class="table-container" *ngIf="!isLoading && filteredPhysicians.length > 0">
        <table class="physicians-table">
          <thead>
            <tr>
              <th>Nombre Completo</th>
              <th>Email</th>
              <th>Especialidad</th>
              <th>Fecha Registro</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let physician of getPaginatedPhysicians()">
              <td>Dr. {{ physician.name }} {{ physician.paternalLastName }} {{ physician.maternalLastName || '' }}</td>
              <td>{{ physician.email }}</td>
              <td>
                <span class="specialty-badge">{{ physician.specialty }}</span>
              </td>
              <td>{{ formatDate(physician.created_at) }}</td>
              <td>
                <span class="status-badge active">Activo</span>
              </td>
              <td class="actions-cell">
                <button 
                  (click)="viewPhysicianDetails(physician)" 
                  class="btn-action view"
                  title="Ver detalles">
                  👁️
                </button>
                <button 
                  (click)="editPhysician(physician)" 
                  class="btn-action edit"
                  title="Editar">
                  ✏️
                </button>
                <button 
                  (click)="deletePhysician(physician)" 
                  class="btn-action delete"
                  title="Eliminar">
                  🗑️
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
  
      <!-- Mensaje cuando no hay resultados -->
      <div *ngIf="!isLoading && filteredPhysicians.length === 0" class="no-results">
        <div class="no-results-icon">👨‍⚕️</div>
        <h3>No se encontraron médicos</h3>
        <p>Intenta ajustar los filtros de búsqueda o agregar un nuevo médico.</p>
        <button (click)="addNewPhysician()" class="btn-primary">
          <i class="icon">👨‍⚕️➕</i>
          Agregar Primer Médico
        </button>
      </div>
  
      <!-- Paginación -->
      <div *ngIf="totalPages > 1" class="pagination">
        <button 
          (click)="previousPage()" 
          [disabled]="currentPage === 1"
          class="btn-pagination">
          ⬅️ Anterior
        </button>
        
        <div class="page-numbers">
          <button 
            *ngFor="let page of getPaginationNumbers(); let i = index"
            (click)="goToPage(i + 1)"
            [class.active]="currentPage === i + 1"
            class="btn-page">
            {{ i + 1 }}
          </button>
        </div>
        
        <button 
          (click)="nextPage()" 
          [disabled]="currentPage === totalPages"
          class="btn-pagination">
          Siguiente ➡️
        </button>
      </div>
    </div>
  </div>